<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>canon²</title>

<link rel="icon" type="image/png" href="favicon.png">

<style>
/* ---------------- Fonts (Myriad everywhere) ---------------- */
@font-face {
    font-family: 'MyriadPro';
    src: url('/fonts/converted/MyriadPro-Light.woff2') format('woff2'),
         url('/fonts/converted/MyriadPro-Light.woff') format('woff');
    font-weight: 300;
}
@font-face {
    font-family: 'MyriadPro';
    src: url('/fonts/converted/MyriadPro-Regular.woff2') format('woff2'),
         url('/fonts/converted/MyriadPro-Regular.woff') format('woff');
    font-weight: 400;
}

/* ---------------- Base / system theme ---------------- */
body {
    margin: 0;
    font-family: 'MyriadPro', sans-serif;
    font-weight: 400;
    background: #f3f3f3;
    color: #f78c20;
}
@media (prefers-color-scheme: dark) {
    body {
        background: #2e2e2e;
        color: #f0b6e7;
    }
}

/* ---------------- Header ---------------- */
header {
    padding: 24px;
    text-align: center;
    font-size: 28px;
    font-weight: 300;
}

/* ---------------- Gallery ---------------- */
.gallery {
    column-count: 4;
    column-gap: 10px;
    padding: 12px;
}
@media (max-width: 1100px) { .gallery { column-count: 3; } }
@media (max-width: 700px)  { .gallery { column-count: 2; } }
@media (max-width: 480px)  { .gallery { column-count: 1; } }

.gallery img {
    width: 100%;
    margin-bottom: 10px;
    cursor: pointer;
}

/* ---------------- Lightbox ---------------- */
.lightbox {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.92);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 999;
}
.lightbox img {
    max-width: 92vw;
    max-height: 92vh;
}

/* ---------------- Desktop arrows ---------------- */
.nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 48px;
    font-weight: 300;
    color: #fff;
    cursor: pointer;
    user-select: none;
    opacity: 0.85;
}
#prevBtn { left: 20px; }
#nextBtn { right: 20px; }

/* Hide desktop arrows on mobile */
@media (max-width: 768px) {
    .nav-btn { display: none; }
}

/* ---------------- Bottom UI cluster ---------------- */
.bottom-ui {
    position: absolute;
    bottom: 64px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 18px;
    pointer-events: none;
}

.counter {
    font-size: 14px;
    font-weight: 300;
    color: #fff;
    pointer-events: auto;
}

.info-btn {
    font-size: 13px;
    font-weight: 300;
    letter-spacing: 0.08em;
    background: rgba(0,0,0,0.65);
    color: #fff;
    border: none;
    padding: 8px 14px;
    cursor: pointer;
    pointer-events: auto;
}

/* ---------------- Mobile bottom nav ---------------- */
.mobile-nav {
    display: none;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 52px;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(6px);
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
}

.mobile-nav button {
    background: none;
    border: none;
    color: #fff;
    font-size: 28px;
    font-weight: 300;
    cursor: pointer;
}

@media (max-width: 768px) {
    .mobile-nav { display: flex; }
}

/* ---------------- Footer ---------------- */
footer {
    text-align: center;
    padding: 20px;
    font-size: 13px;
    opacity: 0.7;
}
</style>
</head>

<body>

<header>canoncanon.cc</header>

<div class="gallery" id="gallery"></div>

<div class="lightbox" id="lightbox">
    <img id="lightboxImg" alt="">

    <!-- Desktop arrows -->
    <div id="prevBtn" class="nav-btn">⟨</div>
    <div id="nextBtn" class="nav-btn">⟩</div>

    <!-- Bottom UI -->
    <div class="bottom-ui">
        <div class="counter" id="counter"></div>
        <button class="info-btn" id="infoBtn">INFO</button>
    </div>

    <!-- Mobile arrows -->
    <div class="mobile-nav">
        <button id="mobilePrev">⟨</button>
        <button id="mobileNext">⟩</button>
    </div>
</div>

<footer>
website under construction<br>
© 2025 — Photos licensed under CC BY-NC-SA 4.0
</footer>

<script>
let photos = [];
let currentIndex = 0;

/* Load photos */
fetch("photos/photos.json")
  .then(r => r.json())
  .then(list => {
      photos = list;
      const gallery = document.getElementById("gallery");

      list.forEach((entry, idx) => {
          const img = document.createElement("img");
          img.src = "photos/thumbs/" + entry.FileName.replace(/\.jpg$/i, ".webp");
          img.loading = "lazy";
          img.onerror = () => img.src = "photos/thumbs/" + entry.FileName;
          img.onclick = () => openLightbox(idx);
          gallery.appendChild(img);
      });
  });

function openLightbox(index) {
    currentIndex = index;
    document.getElementById("lightboxImg").src =
        "photos/full/" + photos[index].FileName;

    document.getElementById("counter").textContent =
        `(${index + 1}/${photos.length})`;

    document.getElementById("lightbox").style.display = "flex";
}

/* Click outside to close */
document.getElementById("lightbox").onclick = e => {
    if (e.target.id === "lightbox") {
        document.getElementById("lightbox").style.display = "none";
    }
};

/* Desktop arrows */
prevBtn.onclick = e => {
    e.stopPropagation();
    if (currentIndex > 0) openLightbox(currentIndex - 1);
};
nextBtn.onclick = e => {
    e.stopPropagation();
    if (currentIndex < photos.length - 1) openLightbox(currentIndex + 1);
};

/* Mobile arrows */
mobilePrev.onclick = e => {
    e.stopPropagation();
    if (currentIndex > 0) openLightbox(currentIndex - 1);
};
mobileNext.onclick = e => {
    e.stopPropagation();
    if (currentIndex < photos.length - 1) openLightbox(currentIndex + 1);
};

/* Keyboard */
document.addEventListener("keydown", e => {
    if (lightbox.style.display !== "flex") return;

    if (e.key === "ArrowRight" && currentIndex < photos.length - 1)
        openLightbox(currentIndex + 1);

    if (e.key === "ArrowLeft" && currentIndex > 0)
        openLightbox(currentIndex - 1);

    if (e.key === "Escape")
        lightbox.style.display = "none";
});
</script>

</body>
</html>
