<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>canon²</title>
<meta name="description" content="an awesome gallery of awesome stuff">
<link rel="icon" type="image/png" sizes="64x64" href="favicon.png">
<link rel="shortcut icon" href="favicon.png" type="image/png">
<link rel="apple-touch-icon" sizes="64x64" href="favicon.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ------------------------------------------------------- -->
<!--  Global Styles & Windows‑98 toolbar                    -->
<!-- ------------------------------------------------------- -->
<style>
/* ==================  BASIC RESET  ===================== */
*, *::before, *::after { box-sizing: border-box; }
body{ margin:0; font-family:'MSSans',sans-serif; color:#000;background:#c0c0c0;font-size:13px; }

/* ==================  TOOLBAR  ========================= */
.toolbar{
    display:flex;
    background:#000080; /* classic Windows‑98 blue */
    color:white;
    padding:2px 4px;
    font-weight:bold;
}
.toolbar button{
    background:#c0c0c0;
    border:1px solid #000080;
    padding:2px 8px;
    margin-right:2px;
    font-family:'MSSans',sans-serif;
    cursor:pointer;
}
.toolbar button:hover{ background:#e0e0e0; }
.toolbar a{
    color:white;
    text-decoration:none;
}
.toolbar .spacer{ flex:1; }

/* ==================  HEADER & FOOTER  ================= */
header{ padding:24px;text-align:center;font-size:28px;font-weight:600;letter-spacing:.5px;background:#e0e0e0;}
footer{ text-align:center;padding:20px;font-size:13px;opacity:.7;background:#e0e0e0; }

/* ==================  GALLERY  ========================= */
.gallery{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    gap:12px;
    padding:12px;
}
.gallery img{
    width:100%;height:auto;object-fit:cover;border-radius:10px;
    cursor:pointer;transition:transform .15s ease;
}
.gallery img:hover{ transform:scale(1.04); }

/* ==================  LIGHTBOX  ======================== */
.lightbox{
    position:fixed; inset:0;background:rgba(0,0,0,.92);
    display:none;align-items:center;justify-content:center;
    z-index:999;
}
.lightbox img{ max-width:92vw;max-height:92vh;border-radius:14px; }
.nav-btn{
    position:absolute;top:50%;transform:translateY(-50%);
    font-family:'MSSans',sans-serif;font-size:48px;padding:10px 18px;
    cursor:pointer;user-select:none;opacity:.8;color:white;
}
.nav-btn:hover{ opacity:1; }
#prevBtn{ left:20px; } #nextBtn{ right:20px; }

/* ==================  DARK MODE (optional)  ============ */
@media (prefers-color-scheme:dark){
    body{ background:#2e2e2e;color:#f0b6e7; }
    .toolbar{ background:#0033cc; border-color:#0066ff;color:white; }
    .toolbar button{ background:#c0c0c0;border-color:#0066ff; }
    .toolbar button:hover{ background:#e0e0e0; }
}
</style>
</head>

<body>

<!-- ==================  TOOLBAR  ========================= -->
<div class="toolbar">
    <a href="index.html"><button>Home</button></a>
    <a href="about/index.html"><button>About</button></a>
    <a href="license/LICENSE.txt"><button>Licensing</button></a>
    <a href="https://instagram.com/yourhandle"><button>Instagram</button></a>
    <div class="spacer"></div>
</div>

<header>canoncanon.cc – test page</header>

<div class="gallery" id="gallery"></div>

<div class="lightbox" id="lightbox">
    <img id="lightboxImg">
    <div id="prevBtn" class="nav-btn">‹</div>
    <div id="nextBtn" class="nav-btn">›</div>
</div>

<footer>
    website under construction<br>
    © 2025 — Photos licensed under CC BY‑NC‑SA 4.0
</footer>

<script>
let photoList = [], currentIndex = 0;

// Load photos.json
fetch("photos/photos.json")
.then(r => r.json())
.then(list => {
    photoList = list;
    const gallery = document.getElementById("gallery");
    list.forEach((file, idx) => {
        const img = document.createElement("img");
        img.src = "photos/thumbs/" + file;
        img.loading = "lazy";
        img.onclick = () => openLightbox(idx);
        gallery.appendChild(img);
    });
});

function openLightbox(index) {
    currentIndex = index;
    document.getElementById("lightboxImg").src = "photos/full/" + photoList[index];
    document.getElementById("lightbox").style.display = "flex";
}

// Close when clicking background or arrow buttons
document.getElementById("lightbox").onclick = (e) => {
    if (e.target.id === "lightbox" || e.target.classList.contains("nav-btn")) {
        document.getElementById("lightbox").style.display = "none";
    }
};

// Next / Prev buttons
document.getElementById("nextBtn").onclick = (e) => {
    e.stopPropagation();
    if (currentIndex < photoList.length - 1) openLightbox(currentIndex + 1);
};
document.getElementById("prevBtn").onclick = (e) => {
    e.stopPropagation();
    if (currentIndex > 0) openLightbox(currentIndex - 1);
};

// Arrow keys
document.addEventListener("keydown", (event) => {
    const lightbox = document.getElementById("lightbox");
    if (lightbox.style.display !== "flex") return;
    if (event.key === "ArrowRight" && currentIndex < photoList.length - 1)
        openLightbox(currentIndex + 1);
    if (event.key === "ArrowLeft" && currentIndex > 0)
        openLightbox(currentIndex - 1);
    if (event.key === "Escape")
        lightbox.style.display = "none";
});
</script>

</body>
</html>
